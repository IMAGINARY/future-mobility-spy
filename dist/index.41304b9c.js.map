{"mappings":"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","sources":["node_modules/@swc/helpers/src/_async_to_generator.js","node_modules/@swc/helpers/src/_class_call_check.js","node_modules/@swc/helpers/src/_create_class.js","node_modules/@swc/helpers/src/_define_property.js","node_modules/@swc/helpers/src/_object_spread.js","node_modules/regenerator-runtime/runtime.js","src/ts/domElements.ts","node_modules/document-ready/index.js","src/ts/camera.ts","src/ts/transforms.ts","node_modules/@imaginary-maths/idler/node_modules/events/events.js","node_modules/@imaginary-maths/idler/node_modules/universal-perf-hooks/dist/browser.js","node_modules/@imaginary-maths/idler/src/idle-timeout.ts","node_modules/@imaginary-maths/idler/src/idle-interval.ts","node_modules/@imaginary-maths/idler/src/idle-animation.ts","node_modules/@imaginary-maths/idler/src/idler.ts","node_modules/@imaginary-maths/idler/src/interrupters/base.ts","node_modules/@imaginary-maths/idler/src/interrupters/custom.ts","node_modules/@imaginary-maths/idler/src/util.ts","node_modules/@imaginary-maths/idler/src/interrupters/event.ts","node_modules/@imaginary-maths/idler/src/interrupters/keyboard.ts","node_modules/@imaginary-maths/idler/src/interrupters/pointer.ts","src/ts/storage.ts","src/ts/configMenu.ts","src/ts/main.ts"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","import defineProperty from './_define_property';\n\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","function qs<T extends Element>(selectors: string): T {\n  return document.querySelector(selectors) as T;\n}\n\nexport const contentElement = qs<HTMLElement>('#content');\n\nexport const configMenuElement = qs<HTMLElement>('#config');\n\nexport const videoElement = qs<HTMLVideoElement>('#camera-video');\nexport const cameraSelectorElement = qs<HTMLSelectElement>('#camera-selector');\nexport const requestCameraPermissionButton = qs<HTMLButtonElement>(\n  '#request-camera-permission-button'\n);\n\nexport const scaleElement = qs<HTMLInputElement>('#scale');\nexport const rotationElement = qs<HTMLInputElement>('#rotation');\nexport const translationXElement = qs<HTMLInputElement>('#translation-x');\nexport const translationYElement = qs<HTMLInputElement>('#translation-y');\nexport const flipHElement = qs<HTMLInputElement>('#flip-h');\nexport const flipVElement = qs<HTMLInputElement>('#flip-v');\nexport const transformElements = [\n  translationXElement,\n  translationYElement,\n  rotationElement,\n  scaleElement,\n  flipHElement,\n  flipVElement,\n];\n\nexport const storeCameraCheckbox = qs<HTMLInputElement>('#storage-camera');\nexport const storeTransformsCheckbox = qs<HTMLInputElement>(\n  '#storage-transforms'\n);\nexport const loadButton = qs<HTMLButtonElement>('#load-button');\nexport const storeButton = qs<HTMLButtonElement>('#store-button');\nexport const loadDefaultsButton = qs<HTMLButtonElement>(\n  '#load-defaults-button'\n);\n\nexport const hideConfigMenuButton = qs<HTMLButtonElement>(\n  '#hide-config-ui-button'\n);\nexport const reloadPageMenuButton = qs<HTMLButtonElement>(\n  '#reload-page-button'\n);\n","'use strict'\n\nmodule.exports = ready\n\nfunction ready (callback) {\n  if (typeof document === 'undefined') {\n    throw new Error('document-ready only runs in the browser')\n  }\n  var state = document.readyState\n  if (state === 'complete' || state === 'interactive') {\n    return setTimeout(callback, 0)\n  }\n\n  document.addEventListener('DOMContentLoaded', function onLoad () {\n    callback()\n  })\n}\n","import { videoElement } from './domElements';\nimport { convertTransformsToCss, Transforms } from './transforms';\n\nconst videoConstraints = {\n  width: { ideal: 1920 },\n  height: { ideal: 1080 },\n  frameRate: { ideal: 30.0 },\n};\n\nconst reconnectionDelay = 10 * 1000;\nconst defaultDeviceId = '';\n\nexport class Camera {\n  private deviceId: string;\n  private stream: MediaStream;\n  private reconnectionTimeout: number;\n\n  public static ondevicechange: Function = undefined;\n\n  protected static lastVideoDeviceInfos: MediaDeviceInfo[] = [];\n  private static staticInitializer = (() => {\n    navigator.mediaDevices.addEventListener('devicechange', () =>\n      Camera.handleDeviceChange()\n    );\n    return true;\n  })();\n\n  constructor() {\n    this.deviceId = defaultDeviceId;\n    this.reconnectionTimeout = 0;\n    this.stream = null;\n\n    navigator.mediaDevices.addEventListener('devicechange', async () => {\n      if (this.reconnectionTimeout !== 0) {\n        await this.tryReconnect();\n      }\n    });\n  }\n\n  static async enumerate(): Promise<MediaDeviceInfo[]> {\n    const mediaDeviceInfos = await navigator.mediaDevices.enumerateDevices();\n    const videoDeviceInfos = mediaDeviceInfos.filter(\n      (d) => d.kind === 'videoinput'\n    );\n    this.lastVideoDeviceInfos = videoDeviceInfos;\n    return videoDeviceInfos;\n  }\n\n  static async requestPermission(): Promise<boolean> {\n    try {\n      await navigator.mediaDevices.getUserMedia({ video: videoConstraints });\n      return true;\n    } catch (err) {\n      console.error('Could not acquire permission to access camera', err);\n      return false;\n    }\n  }\n\n  getDeviceId(): string {\n    return this.deviceId;\n  }\n\n  protected getStreamDeviceId() {\n    return this.stream !== null\n      ? this.stream.getVideoTracks()[0].getSettings().deviceId\n      : defaultDeviceId;\n  }\n\n  disconnectStream() {\n    if (this.stream !== null) {\n      this.stream.getVideoTracks()[0].onended = undefined;\n      this.stream = null;\n      videoElement.src = null;\n      videoElement.srcObject = null;\n    }\n  }\n\n  disconnect() {\n    if (this.stream !== null) {\n      console.info('Disconnecting camera:', this.getStreamDeviceId());\n      this.disconnectStream();\n    }\n  }\n\n  connectTo(deviceId: string) {\n    this.deviceId = deviceId;\n    this.disconnect();\n    this.tryReconnect().then();\n  }\n\n  async tryReconnect() {\n    window.clearTimeout(this.reconnectionTimeout);\n    this.reconnectionTimeout = 0;\n    const deviceId = this.deviceId;\n    console.info('Connecting to camera:', deviceId);\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: { ...videoConstraints, deviceId: { exact: deviceId } },\n      });\n      if (this.deviceId === deviceId) {\n        this.handleConnected(stream);\n      }\n    } catch (err) {\n      console.warn(`Unable to connect to camera (${this.deviceId})`, err);\n      console.info(`Attempting reconnecting in ${reconnectionDelay}ms`);\n      this.reconnectionTimeout = window.setTimeout(\n        () => this.tryReconnect(),\n        reconnectionDelay\n      );\n    }\n  }\n\n  protected static async handleDeviceChange() {\n    const lastVideoDeviceInfos = this.lastVideoDeviceInfos;\n    const videoDeviceInfos = await this.enumerate();\n    console.info('Device list changed:', videoDeviceInfos);\n    if (typeof this.ondevicechange === 'function') {\n      if (lastVideoDeviceInfos.length !== videoDeviceInfos.length) {\n        this.ondevicechange();\n      } else {\n        for (const videoDeviceInfo of videoDeviceInfos) {\n          const idx = lastVideoDeviceInfos.findIndex(\n            (i) => i.deviceId === videoDeviceInfo.deviceId\n          );\n          if (idx === -1) {\n            // an element changed in the list\n            this.ondevicechange();\n            return;\n          }\n        }\n      }\n    }\n  }\n\n  protected handleConnected(stream: MediaStream) {\n    if (this.stream !== null) {\n      this.stream.getVideoTracks()[0].onended = undefined;\n    }\n    this.stream = stream;\n    console.info('Camera connected:', this.deviceId);\n    const { width, height } = stream.getVideoTracks()[0].getSettings();\n    videoElement.srcObject = stream;\n    videoElement.width = width;\n    videoElement.height = height;\n    stream.getVideoTracks()[0].onended = () => this.handleDisconnected();\n  }\n\n  protected handleDisconnected() {\n    console.warn('Camera disconnected:', this.deviceId);\n    this.disconnectStream();\n    this.tryReconnect().then();\n  }\n\n  applyTransforms(transforms: Transforms) {\n    videoElement.style.transform = convertTransformsToCss(transforms);\n  }\n}\n","export interface Transforms {\n  translationX: number;\n  translationY: number;\n  rotation: number;\n  scale: number;\n  flipH: boolean;\n  flipV: boolean;\n}\n\nexport function convertTransformsToCss(transforms: Transforms) {\n  const { translationX, translationY, rotation, scale, flipH, flipV } =\n    transforms;\n\n  let cssTransform = '';\n  cssTransform += ` translate(${translationX}px,${translationY}px)`;\n  cssTransform += ` rotate(${rotation}deg)`;\n  cssTransform += ` scale(${scale})`;\n  const flipScaleH = flipH ? -1 : 1;\n  const flipScaleV = flipV ? -1 : 1;\n  cssTransform += ` scale(${flipScaleH},${flipScaleV})`;\n  cssTransform = cssTransform.trim();\n\n  return cssTransform;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PerformanceObserver = exports.performance = void 0;\nexports.performance = window.performance, exports.PerformanceObserver = window.PerformanceObserver;\n","import { Idler } from './idler-types';\nimport { Callback } from './util';\n\nconst dummyTimeoutId = setTimeout(() => {}, 0);\n\nexport default class IdleTimeout {\n  protected idler: Idler;\n\n  protected beginCb: Callback;\n\n  protected endCb: Callback;\n\n  protected delay: number;\n\n  protected duration: number;\n\n  protected timeoutId: ReturnType<typeof setTimeout>;\n\n  protected durationTimeoutId: ReturnType<typeof setTimeout>;\n\n  private interruptHandler = this.interrupt.bind(this);\n\n  private interruptHandlerInternal = () => {};\n\n  private initialized = false;\n\n  private idle = false;\n\n  protected startIdle: boolean;\n\n  constructor(\n    idler: Idler,\n    beginCb: Callback,\n    delay: number,\n    duration: number,\n    endCb: Callback,\n    startIdle: boolean\n  ) {\n    this.idler = idler;\n    this.beginCb = beginCb;\n    this.delay = delay;\n    this.duration = duration;\n    this.endCb = typeof endCb === 'undefined' ? () => {} : endCb;\n    this.timeoutId = dummyTimeoutId;\n    this.durationTimeoutId = dummyTimeoutId;\n    this.startIdle = startIdle;\n    this.init();\n  }\n\n  init(): void {\n    if (!this.initialized) {\n      this.initialized = true;\n      this.idle = false;\n      if (this.startIdle) {\n        this.timeoutId = setTimeout(() => this.beginIdleModeCycle(), 0);\n      } else {\n        this.timeoutId = setTimeout(() => this.testTimeout(), 0);\n      }\n    }\n  }\n\n  isInitialized(): boolean {\n    return this.initialized;\n  }\n\n  clear(): void {\n    if (this.initialized) {\n      this.interrupt();\n      clearTimeout(this.timeoutId);\n      this.initialized = false;\n    }\n  }\n\n  isIdle(): boolean {\n    return this.idle;\n  }\n\n  interrupt(): void {\n    this.interruptHandlerInternal();\n  }\n\n  protected testTimeout(): void {\n    if (this.isInitialized()) {\n      const idleTime = this.idler.getIdleTime();\n      if (idleTime >= this.delay) {\n        this.beginIdleModeCycle();\n      } else {\n        const idleTimeRemaining = this.delay - idleTime;\n        this.timeoutId = setTimeout(\n          () => this.testTimeout(),\n          idleTimeRemaining\n        );\n      }\n    }\n  }\n\n  private beginIdleModeCycle(): void {\n    let interruptedEarly = false;\n    this.interruptHandlerInternal = () => {\n      interruptedEarly = true;\n    };\n    this.idler.on('interrupted', this.interruptHandler);\n    this.beforeIdle();\n    this.idle = true;\n    this.beginCb();\n    if (interruptedEarly) {\n      this.endIdleModeCycle();\n    } else {\n      this.interruptHandlerInternal = this.endIdleModeCycle.bind(this);\n    }\n  }\n\n  private endIdleModeCycle(): void {\n    this.interruptHandlerInternal = () => {};\n    this.idler.off('interrupted', this.interruptHandler);\n    this.endCb();\n    this.idle = false;\n    this.afterIdle();\n    this.timeoutId = setTimeout(() => this.testTimeout(), this.delay);\n  }\n\n  protected beforeIdle(): void {\n    if (Number.isFinite(this.duration) && this.duration >= 0)\n      this.durationTimeoutId = setTimeout(\n        () => this.interrupt(),\n        this.duration\n      );\n  }\n\n  protected afterIdle(): void {\n    clearTimeout(this.durationTimeoutId);\n  }\n}\n\nexport { IdleTimeout };\n","import { Idler } from './idler-types';\nimport { Callback } from './util';\nimport { IdleTimeout } from './idle-timeout';\n\nconst dummyIntervalId = setInterval(() => {}, 0);\n\nexport default class IdleInterval extends IdleTimeout {\n  protected intervalCb: Callback;\n\n  protected interval: number;\n\n  protected intervalId: ReturnType<typeof setInterval> = dummyIntervalId;\n\n  constructor(\n    idler: Idler,\n    beginCb: Callback,\n    delay: number,\n    duration: number,\n    intervalCb: Callback,\n    interval: number,\n    endCb: Callback,\n    startIdle: boolean\n  ) {\n    super(idler, beginCb, delay, duration, endCb, startIdle);\n    this.intervalCb = intervalCb;\n    this.interval = interval;\n  }\n\n  clear(): void {\n    clearInterval(this.intervalId);\n    super.clear();\n  }\n\n  protected beforeIdle(): void {\n    super.beforeIdle();\n    this.intervalId = setInterval(this.intervalCb, this.interval);\n  }\n\n  protected afterIdle(): void {\n    clearInterval(this.intervalId);\n    super.afterIdle();\n  }\n}\n\nexport { IdleInterval };\n","import { Idler } from './idler-types';\nimport { Callback } from './util';\nimport { IdleInterval } from './idle-interval';\n\nconst dummyAnimationFrameRequestId = requestAnimationFrame(() => {});\n\nexport default class IdleAnimation extends IdleInterval {\n  protected animationCb: FrameRequestCallback;\n\n  protected animationFrameRequestId: ReturnType<typeof requestAnimationFrame> =\n    dummyAnimationFrameRequestId;\n\n  protected animateHandler = this.animate.bind(this);\n\n  constructor(\n    idler: Idler,\n    beginCb: Callback,\n    delay: number,\n    duration: number,\n    animationCb: FrameRequestCallback,\n    intervalCb: Callback,\n    interval: number,\n    endCb: Callback,\n    startIdle: boolean\n  ) {\n    super(\n      idler,\n      beginCb,\n      delay,\n      duration,\n      intervalCb,\n      interval,\n      endCb,\n      startIdle\n    );\n    this.animationCb = animationCb;\n  }\n\n  clear(): void {\n    cancelAnimationFrame(this.animationFrameRequestId);\n    super.clear();\n  }\n\n  protected beforeIdle(): void {\n    super.beforeIdle();\n    this.animationFrameRequestId = requestAnimationFrame(this.animateHandler);\n  }\n\n  protected animate(ms: Parameters<FrameRequestCallback>[0]): void {\n    this.animationCb(ms);\n    this.animationFrameRequestId = requestAnimationFrame(this.animateHandler);\n  }\n\n  protected afterIdle(): void {\n    cancelAnimationFrame(this.animationFrameRequestId);\n    super.afterIdle();\n  }\n}\n\nexport { IdleAnimation };\n","// eslint-disable-next-line import/no-extraneous-dependencies\nimport { performance } from 'universal-perf-hooks';\nimport { EventEmitter } from 'events';\n\nimport { Idler, CallbackOptions } from './idler-types';\nimport { IdleTimeout } from './idle-timeout';\nimport { IdleInterval } from './idle-interval';\nimport { IdleAnimation } from './idle-animation';\nimport { Interrupter } from './interrupters/interrupter';\n\nfunction now(): number {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access\n  return performance.now();\n}\n\nconst defaultCallbackOptions: CallbackOptions = {\n  delay: 60 * 1000,\n  duration: Number.POSITIVE_INFINITY,\n  onBegin: () => {},\n  onEnd: () => {},\n  interval: Number.POSITIVE_INFINITY,\n  onInterval: () => {},\n  onAnimate: () => {},\n  immediate: false,\n};\n\nexport default class IdlerImpl extends EventEmitter implements Idler {\n  protected lastId: number;\n\n  protected timers: Map<number, IdleTimeout>;\n\n  protected lastEventTimestampMs: number;\n\n  protected readonly interruptHandler: () => void;\n\n  constructor(...interrupters: Interrupter[]) {\n    super();\n    this.lastId = 0;\n    this.timers = new Map<number, IdleTimeout>();\n    this.lastEventTimestampMs = now();\n    this.interruptHandler = this.interrupt.bind(this);\n\n    interrupters.forEach((interrupter) =>\n      this.registerInterrupter(interrupter)\n    );\n  }\n\n  addCallback(options: Partial<CallbackOptions>): number {\n    if (typeof options.onAnimate !== 'undefined') {\n      const {\n        onBegin,\n        delay,\n        duration,\n        onAnimate,\n        onInterval,\n        interval,\n        onEnd,\n        immediate,\n      } = {\n        ...defaultCallbackOptions,\n        ...options,\n      };\n      const idleAnimation = new IdleAnimation(\n        this,\n        onBegin,\n        delay,\n        duration,\n        onAnimate,\n        onInterval,\n        interval,\n        onEnd,\n        immediate\n      );\n      return this.addIdleTimeout(idleAnimation);\n    }\n    if (\n      typeof options.interval !== 'undefined' &&\n      Number.isFinite(options.interval)\n    ) {\n      const {\n        onBegin,\n        delay,\n        duration,\n        onInterval,\n        interval,\n        onEnd,\n        immediate,\n      } = {\n        ...defaultCallbackOptions,\n        ...options,\n      };\n      const idleInterval = new IdleInterval(\n        this,\n        onBegin,\n        delay,\n        duration,\n        onInterval,\n        interval,\n        onEnd,\n        immediate\n      );\n      return this.addIdleTimeout(idleInterval);\n    }\n    const { onBegin, delay, duration, onEnd, immediate } = {\n      ...defaultCallbackOptions,\n      ...options,\n    };\n    const idleTimeout = new IdleTimeout(\n      this,\n      onBegin,\n      delay,\n      duration,\n      onEnd,\n      immediate\n    );\n    return this.addIdleTimeout(idleTimeout);\n  }\n\n  protected addIdleTimeout(idleTimeout: IdleTimeout): number {\n    this.lastId += 1;\n    const id = this.lastId;\n    this.timers.set(id, idleTimeout);\n    return id;\n  }\n\n  removeCallback(id: number): void {\n    const timer = this.timers.get(id);\n    if (typeof timer !== 'undefined') timer.clear();\n    this.timers.delete(id);\n  }\n\n  clear(): void {\n    this.timers.forEach((timer) => timer.clear());\n    this.timers.clear();\n  }\n\n  interrupt(): void {\n    this.lastEventTimestampMs = Math.max(now(), this.lastEventTimestampMs);\n    this.emit('interrupted');\n  }\n\n  /**\n   * Return the time in ms since the last interruption of the idle state.\n   * @returns {number}\n   */\n  getIdleTime(): number {\n    return now() - this.lastEventTimestampMs;\n  }\n\n  registerInterrupter(interrupter: Interrupter): this {\n    interrupter.on('interrupted', this.interruptHandler);\n    return this;\n  }\n\n  unregisterInterrupter(interrupter: Interrupter): this {\n    interrupter.off('interrupted', this.interruptHandler);\n    return this;\n  }\n}\n\nexport { IdlerImpl as Idler, CallbackOptions };\n","import { EventEmitter } from 'events';\nimport { Interrupter } from './interrupter';\n\nexport default class InterrupterBase\n  extends EventEmitter\n  implements Interrupter\n{\n  protected readonly emitInterruptedHandler: () => void;\n\n  constructor() {\n    super();\n    this.emitInterruptedHandler = this.emitInterrupted.bind(this);\n  }\n\n  protected emitInterrupted(): void {\n    this.emit('interrupted');\n  }\n}\n\nexport { InterrupterBase };\n","import { InterrupterBase } from './base';\n\nexport default class CustomInterrupter extends InterrupterBase {\n  constructor(onInit: (onInterrupted: () => void) => unknown) {\n    super();\n    onInit(this.emitInterruptedHandler);\n  }\n}\n\nexport { CustomInterrupter };\n","import { EventEmitter } from 'events';\n\nexport type EventEmitterOnOff = Pick<EventEmitter, 'on' | 'off'>;\nexport type EventTargetAddRemove = Pick<\n  EventTarget,\n  'addEventListener' | 'removeEventListener'\n>;\nexport type EventEmitterOnOffOrEventTargetAddRemove =\n  | EventEmitterOnOff\n  | EventTargetAddRemove;\n\nexport function hasOnOff(\n  obj: EventEmitterOnOffOrEventTargetAddRemove\n): obj is EventEmitterOnOff {\n  return (\n    typeof (obj as EventEmitterOnOff).on !== 'undefined' &&\n    typeof (obj as EventEmitterOnOff).off !== 'undefined'\n  );\n}\n\nexport function isIterable<X>(i: X | Iterable<X>): i is Iterable<X> {\n  return (\n    i !== null &&\n    typeof i !== 'undefined' &&\n    typeof (i as Iterable<X>)[Symbol.iterator] === 'function'\n  );\n}\n\nexport type Callback = () => void;\n","import { InterrupterBase } from './base';\nimport {\n  EventEmitterOnOffOrEventTargetAddRemove,\n  hasOnOff,\n  isIterable,\n} from '../util';\n\nexport default class EventInterrupter extends InterrupterBase {\n  protected eventEmitters: Set<EventEmitterOnOffOrEventTargetAddRemove>;\n\n  protected eventTypes: Set<string>;\n\n  constructor(\n    eventEmittersOrTargets?:\n      | EventEmitterOnOffOrEventTargetAddRemove\n      | Iterable<EventEmitterOnOffOrEventTargetAddRemove>,\n    eventTypes?: string | Iterable<string>\n  ) {\n    super();\n    this.eventEmitters = new Set<EventEmitterOnOffOrEventTargetAddRemove>();\n    this.eventTypes = new Set<string>();\n    if (typeof eventEmittersOrTargets !== 'undefined') {\n      if (isIterable(eventEmittersOrTargets)) {\n        this.addEventEmitter(...eventEmittersOrTargets);\n      } else {\n        this.addEventEmitter(eventEmittersOrTargets);\n      }\n    }\n    if (typeof eventTypes !== 'undefined') {\n      if (isIterable(eventTypes)) {\n        this.addEventType(...eventTypes);\n      } else {\n        this.addEventType(eventTypes);\n      }\n    }\n  }\n\n  addEventEmitter(\n    ...eventEmittersOrTargets: EventEmitterOnOffOrEventTargetAddRemove[]\n  ): this {\n    eventEmittersOrTargets.forEach((eventEmitterOrTarget) => {\n      if (!this.eventEmitters.has(eventEmitterOrTarget)) {\n        const on = this.wrapOn(eventEmitterOrTarget);\n        this.eventTypes.forEach(on);\n      }\n      this.eventEmitters.add(eventEmitterOrTarget);\n    });\n    return this;\n  }\n\n  removeEventEmitter(\n    ...eventEmittersOrTargets: EventEmitterOnOffOrEventTargetAddRemove[]\n  ): this {\n    eventEmittersOrTargets.forEach((eventEmitterOrTarget) => {\n      if (this.eventEmitters.has(eventEmitterOrTarget)) {\n        const off = this.wrapOff(eventEmitterOrTarget);\n        this.eventTypes.forEach(off);\n      }\n      this.eventEmitters.delete(eventEmitterOrTarget);\n    });\n    return this;\n  }\n\n  hasEventEmitter(\n    eventEmitterOrTarget: EventEmitterOnOffOrEventTargetAddRemove\n  ): boolean {\n    return this.eventEmitters.has(eventEmitterOrTarget);\n  }\n\n  addEventType(...eventTypes: string[]): this {\n    eventTypes.forEach((eventType) => {\n      if (!this.eventTypes.has(eventType))\n        this.eventEmitters.forEach((eventEmitter) =>\n          this.wrapOn(eventEmitter)(eventType)\n        );\n      this.eventTypes.add(eventType);\n    });\n    return this;\n  }\n\n  removeEventType(...eventTypes: string[]): this {\n    eventTypes.forEach((eventType) => {\n      if (this.eventTypes.has(eventType))\n        this.eventEmitters.forEach((eventEmitter) =>\n          this.wrapOff(eventEmitter)(eventType)\n        );\n      this.eventTypes.delete(eventType);\n    });\n    return this;\n  }\n\n  hasEventType(eventType: string): boolean {\n    return this.eventTypes.has(eventType);\n  }\n\n  protected wrapOn(\n    eventEmitterOrTarget: EventEmitterOnOffOrEventTargetAddRemove\n  ): (eventType: string) => void {\n    return hasOnOff(eventEmitterOrTarget)\n      ? (eventType: string) =>\n          eventEmitterOrTarget.on(eventType, this.emitInterruptedHandler)\n      : (eventType: string) =>\n          eventEmitterOrTarget.addEventListener(\n            eventType,\n            this.emitInterruptedHandler\n          );\n  }\n\n  protected wrapOff(\n    eventEmitterOrTarget: EventEmitterOnOffOrEventTargetAddRemove\n  ): (eventType: string) => void {\n    return hasOnOff(eventEmitterOrTarget)\n      ? (eventType: string) =>\n          eventEmitterOrTarget.on(eventType, this.emitInterruptedHandler)\n      : (eventType: string) =>\n          eventEmitterOrTarget.addEventListener(\n            eventType,\n            this.emitInterruptedHandler\n          );\n  }\n}\n\nexport { EventInterrupter };\n","import { EventInterrupter } from './event';\nimport { EventEmitterOnOffOrEventTargetAddRemove } from '../util';\n\nconst keyboardEvents = ['keydown', 'keyup'];\n\nexport default class KeyboardInterrupter extends EventInterrupter {\n  constructor(\n    eventEmittersOrTargets:\n      | EventEmitterOnOffOrEventTargetAddRemove\n      | Iterable<EventEmitterOnOffOrEventTargetAddRemove> = [document]\n  ) {\n    super(eventEmittersOrTargets, keyboardEvents);\n  }\n}\n\nexport { KeyboardInterrupter };\n","import { EventInterrupter } from './event';\nimport { EventEmitterOnOffOrEventTargetAddRemove } from '../util';\n\nconst pointerEvents = ['pointerdown', 'pointermove', 'pointerup'];\nconst mouseAndTouchEvents = [\n  'mousedown',\n  'mousemove',\n  'mouseup',\n  'touchstart',\n  'touchmove',\n  'touchend',\n];\n\nexport default class PointerInterrupter extends EventInterrupter {\n  constructor(\n    eventEmittersOrTargets:\n      | EventEmitterOnOffOrEventTargetAddRemove\n      | Iterable<EventEmitterOnOffOrEventTargetAddRemove> = [document]\n  ) {\n    super(eventEmittersOrTargets, PointerInterrupter.getEventTypes());\n  }\n\n  protected static getEventTypes(): string[] {\n    return typeof window.PointerEvent === 'function'\n      ? pointerEvents\n      : mouseAndTouchEvents;\n  }\n}\n\nexport { PointerInterrupter };\n","import { Transforms } from './transforms';\n\nexport class Storage {\n  static getDefaultDeviceId(): string {\n    return '';\n  }\n\n  static loadDeviceId(): string {\n    return localStorage.getItem('deviceId') ?? this.getDefaultDeviceId();\n  }\n\n  static storeDeviceId<T extends string | MediaStream>(\n    deviceIdOrStream: T\n  ): T extends string ? string : MediaStream {\n    const deviceId =\n      typeof deviceIdOrStream === 'string'\n        ? deviceIdOrStream\n        : deviceIdOrStream.getVideoTracks()[0].getSettings().deviceId;\n    localStorage.setItem('deviceId', deviceId);\n    return deviceIdOrStream as T extends string ? string : MediaStream;\n  }\n\n  static resetDeviceId() {\n    this.storeDeviceId(this.getDefaultDeviceId());\n  }\n\n  static getDefaultTransforms(): Transforms {\n    return {\n      translationX: 0.0,\n      translationY: 0.0,\n      rotation: 0.0,\n      scale: 1.0,\n      flipH: false,\n      flipV: false,\n    };\n  }\n\n  static loadTransforms() {\n    try {\n      const transformsString = localStorage.getItem('transforms');\n      const transforms = JSON.parse(transformsString) as Transforms;\n      return { ...this.getDefaultTransforms(), ...transforms };\n    } catch (e) {\n      console.log(e);\n      return this.getDefaultTransforms();\n    }\n  }\n\n  static storeTransforms(transforms: Transforms) {\n    localStorage.setItem('transforms', JSON.stringify(transforms));\n    return transforms;\n  }\n\n  static resetTransforms() {\n    this.storeTransforms(this.getDefaultTransforms());\n  }\n\n  static reset(what?: { deviceId?: boolean; transforms?: boolean }) {\n    const resetAll = { deviceId: true, transforms: true };\n    what = { ...resetAll, ...what };\n    if (what.deviceId) Storage.resetDeviceId();\n    if (what.transforms) Storage.resetTransforms();\n  }\n}\n","import {\n  cameraSelectorElement,\n  configMenuElement,\n  contentElement,\n  flipHElement,\n  flipVElement,\n  hideConfigMenuButton,\n  loadButton,\n  loadDefaultsButton,\n  reloadPageMenuButton,\n  requestCameraPermissionButton,\n  rotationElement,\n  scaleElement,\n  storeButton,\n  storeCameraCheckbox,\n  storeTransformsCheckbox,\n  transformElements,\n  translationXElement,\n  translationYElement,\n} from './domElements';\nimport { Camera } from './camera';\nimport { Transforms } from './transforms';\nimport {\n  Idler,\n  KeyboardInterrupter,\n  PointerInterrupter,\n} from '@imaginary-maths/idler';\nimport { Storage } from './storage';\n\ninterface StorageFlags {\n  camera: boolean;\n  transforms: boolean;\n}\n\nexport class ConfigMenu {\n  private static instancePromise: Promise<ConfigMenu> = null;\n  protected idler: Idler;\n  protected camera: Camera;\n\n  protected deviceId: string;\n  protected transforms: Transforms;\n\n  protected constructor() {\n    Camera.ondevicechange = () => this.onDeviceChange();\n    this.camera = new Camera();\n\n    this.loadTransforms();\n    this.loadDeviceId();\n\n    const onTransformsChangedCb = () => this.handleTransformsChanged();\n    for (const transformElement of transformElements) {\n      transformElement.onchange = onTransformsChangedCb;\n      transformElement.oninput = onTransformsChangedCb;\n    }\n\n    contentElement.onclick = () => this.toggle();\n    hideConfigMenuButton.onclick = () => this.show(false);\n    reloadPageMenuButton.onclick = () => location.reload();\n\n    loadButton.onclick = () => this.load();\n    storeButton.onclick = () => this.store();\n    loadDefaultsButton.onclick = () => this.loadDefaults();\n\n    cameraSelectorElement.onchange = () => this.handleCameraSelected();\n    requestCameraPermissionButton.onclick = async () =>\n      this.handleRequestCameraPermission();\n\n    // Hide config menu after hideDelay ms\n    const hideDelay = 20 * 1000;\n    this.idler = new Idler(\n      new PointerInterrupter(configMenuElement),\n      new KeyboardInterrupter()\n    );\n    this.idler.addCallback({\n      delay: hideDelay,\n      onBegin: () => this.show(false),\n    });\n  }\n\n  getDeviceId(): string {\n    return this.deviceId;\n  }\n\n  setDeviceId<T extends string | MediaStream>(\n    deviceIdOrStream: T\n  ): T extends string ? string : MediaStream {\n    const deviceId =\n      typeof deviceIdOrStream === 'string'\n        ? deviceIdOrStream\n        : deviceIdOrStream.getVideoTracks()[0].getSettings().deviceId;\n    cameraSelectorElement.value = deviceId;\n    this.deviceId = deviceId;\n    this.camera.connectTo(deviceId);\n    return deviceIdOrStream as T extends string ? string : MediaStream;\n  }\n\n  loadDefaultDeviceId() {\n    const defaultDeviceId = Storage.getDefaultDeviceId();\n    this.setDeviceId(defaultDeviceId);\n    return defaultDeviceId;\n  }\n\n  loadDeviceId() {\n    const deviceId = Storage.loadDeviceId();\n    this.setDeviceId(deviceId);\n    return deviceId;\n  }\n\n  storeDeviceId() {\n    Storage.storeDeviceId(this.getDeviceId());\n  }\n\n  getTransforms(): Transforms {\n    return { ...this.transforms };\n  }\n\n  setTransforms(transforms: Transforms): Transforms {\n    const { translationX, translationY, rotation, scale, flipH, flipV } =\n      transforms;\n    translationXElement.valueAsNumber = translationX;\n    translationYElement.valueAsNumber = translationY;\n    rotationElement.valueAsNumber = rotation;\n    scaleElement.valueAsNumber = scale;\n    flipHElement.checked = flipH;\n    flipVElement.checked = flipV;\n    this.transforms = transforms;\n    this.camera.applyTransforms(transforms);\n    return transforms;\n  }\n\n  loadDefaultTransforms(): Transforms {\n    const defaultTransforms = Storage.getDefaultTransforms();\n    this.setTransforms(defaultTransforms);\n    return defaultTransforms;\n  }\n\n  loadTransforms(): Transforms {\n    const transforms = Storage.loadTransforms();\n    this.setTransforms(transforms);\n    return transforms;\n  }\n\n  storeTransforms() {\n    Storage.storeTransforms(this.getTransforms());\n  }\n\n  async updateCameraSelector(\n    videoDeviceInfos: MediaDeviceInfo[]\n  ): Promise<void> {\n    while (cameraSelectorElement.children.length > 0) {\n      cameraSelectorElement.removeChild(\n        cameraSelectorElement.children[\n          cameraSelectorElement.children.length - 1\n        ]\n      );\n    }\n\n    function createOption(deviceId, label) {\n      const option = document.createElement('option');\n      option.value = deviceId;\n      option.innerText = `${label}`;\n      if (deviceId !== '') {\n        option.innerText += `(${deviceId})`;\n      }\n      return option;\n    }\n\n    const myDeviceId = this.getDeviceId();\n    let hasMyDeviceId = false;\n    for (let videoDeviceInfo of videoDeviceInfos) {\n      hasMyDeviceId = hasMyDeviceId || videoDeviceInfo.deviceId === myDeviceId;\n      const option = createOption(\n        videoDeviceInfo.deviceId,\n        videoDeviceInfo.label\n      );\n      cameraSelectorElement.appendChild(option);\n    }\n    if (!hasMyDeviceId) {\n      const label =\n        myDeviceId === Storage.getDefaultDeviceId()\n          ? '--- please select ---'\n          : '--- selected, but unavailable ---';\n      const option = createOption(myDeviceId, label);\n      cameraSelectorElement.appendChild(option);\n    }\n    cameraSelectorElement.value = myDeviceId;\n  }\n\n  getStorageFlags(): StorageFlags {\n    return {\n      camera: storeCameraCheckbox.checked,\n      transforms: storeTransformsCheckbox.checked,\n    };\n  }\n\n  loadDefaults() {\n    const { camera, transforms } = this.getStorageFlags();\n    if (camera) {\n      this.loadDefaultDeviceId();\n    }\n    if (transforms) {\n      this.loadDefaultTransforms();\n    }\n  }\n\n  load() {\n    const { camera, transforms } = this.getStorageFlags();\n    if (camera) {\n      this.loadDeviceId();\n    }\n    if (transforms) {\n      this.loadTransforms();\n    }\n  }\n\n  store() {\n    const { camera, transforms } = this.getStorageFlags();\n    if (camera) {\n      this.storeDeviceId();\n    }\n    if (transforms) {\n      this.storeTransforms();\n    }\n  }\n\n  async onDeviceChange() {\n    await this.updateCameraSelector(await Camera.enumerate());\n  }\n\n  async handleCameraSelected() {\n    this.setDeviceId(cameraSelectorElement.value);\n  }\n\n  handleTransformsChanged() {\n    const transforms = {\n      translationX: translationXElement.valueAsNumber,\n      translationY: translationYElement.valueAsNumber,\n      rotation: rotationElement.valueAsNumber,\n      scale: scaleElement.valueAsNumber,\n      flipH: flipHElement.checked,\n      flipV: flipVElement.checked,\n    };\n    this.setTransforms(transforms);\n  }\n\n  async handleRequestCameraPermission() {\n    requestCameraPermissionButton.disabled = true;\n    requestCameraPermissionButton.classList.remove('failed', 'succeeded');\n    const granted = await Camera.requestPermission();\n    const cssClass = granted ? 'succeeded' : 'failed';\n    requestCameraPermissionButton.classList.add(cssClass);\n    if (granted) {\n      await this.updateCameraSelector(await Camera.enumerate());\n    }\n    requestCameraPermissionButton.disabled = false;\n  }\n\n  isVisible(): boolean {\n    return configMenuElement.style.display === 'block';\n  }\n\n  show(visible: boolean) {\n    this.idler.interrupt();\n    configMenuElement.style.display = visible ? 'block' : 'none';\n  }\n\n  toggle() {\n    this.show(!this.isVisible());\n  }\n\n  static async getInstance(): Promise<ConfigMenu> {\n    if (!this.instancePromise) {\n      this.instancePromise = new Promise<ConfigMenu>(\n        async (resolve, reject) => {\n          const instance = new ConfigMenu();\n          await instance.updateCameraSelector(await Camera.enumerate());\n          resolve(instance);\n        }\n      );\n    }\n    return await this.instancePromise;\n  }\n}\n","import ready from 'document-ready';\n\nimport { ConfigMenu } from './configMenu';\n\nasync function main() {\n  const configMenu = await ConfigMenu.getInstance();\n  global.configMenu = configMenu;\n}\n\nready(main);\n"],"names":["$76481dfb5c2d1860$var$asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","instance","Constructor","TypeError","$12a96b76eec9d253$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","protoProps","staticProps","prototype","obj","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","$5f102f212a2755c0$export$2e2bcd8739ae039","$c565e523318d9b87$var$runtime","exports","Op","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","GenStateSuspendedYield","makeInvokeMethod","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","result","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","iter","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","$c565e523318d9b87$exports","regeneratorRuntime","accidentalStrictMode","globalThis","Function","$ee15b420a24b64e5$var$qs","selectors","document","querySelector","$22c3514d02d3482d$exports","callback","readyState","setTimeout","addEventListener","$ee15b420a24b64e5$export$b6999085606581b2","$ee15b420a24b64e5$export$4cb84fc7771e3bb5","$ee15b420a24b64e5$export$558aedd40ea1f2be","$ee15b420a24b64e5$export$41c1864543fb0daa","$ee15b420a24b64e5$export$46a7e0b9d8758036","$ee15b420a24b64e5$export$2c54258d8bcc9e50","$ee15b420a24b64e5$export$6b3f69c997ae528","$ee15b420a24b64e5$export$a5a5f85b12b8ae67","$ee15b420a24b64e5$export$bf5a2006b3c3e7fd","$ee15b420a24b64e5$export$d5d77b1f29dc2395","$ee15b420a24b64e5$export$b261ea0dc3016ca5","$ee15b420a24b64e5$export$143e0e2d42c727df","$ee15b420a24b64e5$export$db29d592ea33f3a3","$ee15b420a24b64e5$export$28f0aab298092920","$ee15b420a24b64e5$export$3011641f7146c343","$ee15b420a24b64e5$export$ed16b5d9137f5082","$ee15b420a24b64e5$export$a9ec393fea4a740e","$ee15b420a24b64e5$export$138518fe965711db","$ee15b420a24b64e5$export$11a582ede5aa3ea0","$5420f35d3fd46966$var$videoConstraints","width","ideal","height","frameRate","$5420f35d3fd46966$export$79f141de891a5fed","deviceId","reconnectionTimeout","stream","navigator","mediaDevices","_callee","tryReconnect","getVideoTracks","getSettings","onended","src","srcObject","console","getStreamDeviceId","disconnectStream","disconnect","_this","window","clearTimeout","getUserMedia","video","$92b2043769dbe2c0$export$2e2bcd8739ae039","exact","_ctx","handleConnected","warn","t0","bind","ref","handleDisconnected","transforms","style","transform","translationX","translationY","rotation","scale","flipH","flipV","cssTransform","flipScaleV","trim","$244e57ffe6e08a64$export$1950acf73b9823c3","mediaDeviceInfos","videoDeviceInfos","enumerateDevices","d","kind","lastVideoDeviceInfos","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","videoDeviceInfo","enumerate","ondevicechange","findIndex","return","staticInitializer","handleDeviceChange","ReflectOwnKeys","performance","PerformanceObserver","R","Reflect","ReflectApply","receiver","getOwnPropertyNames","NumberIsNaN","Number","EventEmitter","init","$1d09e33453f66ae3$var$d","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","prepend","m","events","existing","newListener","emit","unshift","warned","w","String","emitter","count","onceWrapper","fired","removeListener","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","arrayClone","listenerCount","n","copy","eventTargetAgnosticAddListener","flags","on","once","wrapListener","removeEventListener","get","set","RangeError","setMaxListeners","getMaxListeners","doError","er","message","handler","len","listeners","addListener","prependListener","prependOnceListener","off","list","position","originalListener","shift","index","removeAllListeners","rawListeners","eventNames","errorListener","resolver","dummyTimeoutId","IdleTimeout","t","idler","beginCb","delay","duration","endCb","startIdle","interrupt","timeoutId","durationTimeoutId","initialized","idle","beginIdleModeCycle","testTimeout","e","isInitialized","clear","isIdle","interruptHandlerInternal","idleTime","getIdleTime","_this2","interruptedEarly","interruptHandler","beforeIdle","endIdleModeCycle","afterIdle","_this3","isFinite","_this4","dummyIntervalId","setInterval","IdleInterval","intervalCb","interval","clearInterval","intervalId","_IdleTimeout","dummyAnimationFrameRequestId","requestAnimationFrame","IdleAnimation","animationCb","animate","cancelAnimationFrame","animationFrameRequestId","_IdleInterval","animateHandler","ms","now","defaultCallbackOptions","POSITIVE_INFINITY","onBegin","onEnd","onInterval","onAnimate","immediate","IdlerImpl","lastId","timers","Map","lastEventTimestampMs","interrupter","registerInterrupter","addCallback","options","$1d09e33453f66ae3$var$t","idleAnimation","addIdleTimeout","idleInterval","s","idleTimeout","id","removeCallback","timer","Math","max","o","unregisterInterrupter","InterrupterBase","emitInterruptedHandler","emitInterrupted","CustomInterrupter","onInit","hasOnOff","isIterable","EventInterrupter","eventEmittersOrTargets","eventTypes","eventEmitters","Set","addEventEmitter","addEventType","eventEmitterOrTarget","has","wrapOn","add","removeEventEmitter","_this5","wrapOff","hasEventEmitter","eventType","_this6","eventEmitter","removeEventType","_this7","hasEventType","_this8","_this9","keyboardEvents","KeyboardInterrupter","pointerEvents","mouseAndTouchEvents","PointerInterrupter","getEventTypes","PointerEvent","$6a95ae3698070204$export$bf2a15d34f3c441c","localStorage","getItem","getDefaultDeviceId","deviceIdOrStream","setItem","storeDeviceId","transformsString","JSON","parse","getDefaultTransforms","log","stringify","storeTransforms","what","resetDeviceId","resetTransforms","$a96ebd95f1d08d74$export$bf4b77307d26d0ac","onDeviceChange","camera","loadTransforms","loadDeviceId","onTransformsChangedCb","_this1","handleTransformsChanged","transformElement","onchange","oninput","onclick","toggle","show","location","reload","load","store","loadDefaults","handleCameraSelected","handleRequestCameraPermission","$1d09e33453f66ae3$exports","Idler","connectTo","defaultDeviceId","setDeviceId","getDeviceId","valueAsNumber","checked","applyTransforms","defaultTransforms","setTransforms","getTransforms","myDeviceId","hasMyDeviceId","option","label","option1","children","removeChild","createOption","createElement","innerText","appendChild","getStorageFlags","loadDefaultDeviceId","loadDefaultTransforms","updateCameraSelector","granted","cssClass","disabled","classList","remove","requestPermission","display","visible","isVisible","instancePromise","_main","$76481dfb5c2d1860$export$2e2bcd8739ae039","$parcel$interopDefault","configMenu","getInstance","$parcel$global"],"version":3,"file":"index.41304b9c.js.map"}