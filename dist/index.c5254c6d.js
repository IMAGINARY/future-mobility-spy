function e(e){return e&&e.__esModule?e.default:e}const t={width:1920,height:1080};function n(){localStorage.removeItem("deviceId"),window.location.reload()}async function o(e){return await navigator.mediaDevices.getUserMedia({video:{...t,deviceId:{exact:e}}})}async function c(){const e=(await navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind)),t=document.getElementById("camera-selector");for(;t.children.length>0;)t.removeChild(t.children[t.children.length]);console.log(e);for(let n of e){const e=document.createElement("option");e.value=n.deviceId,e.innerText=`${n.label} (${n.deviceId})`,t.appendChild(e)}const n=document.getElementById("access-camera-button");return n.disabled=!1,new Promise(((e,c)=>{n.onclick=async()=>{try{const c=await o(t.value);n.disabled=!0,n.onclick=null,e(function(e){const t=e.getVideoTracks()[0].getSettings().deviceId;return localStorage.setItem("deviceId",t),e}(c))}catch(e){alert("Could acquire camera. Please check the console log for details."),console.log(e),c(e)}}}))}e((function(e){if("undefined"==typeof document)throw new Error("document-ready only runs in the browser");var t=document.readyState;if("complete"===t||"interactive"===t)return setTimeout(e,0);document.addEventListener("DOMContentLoaded",(function(){e()}))}))((async function(){await async function(){document.getElementById("clear-device-id").onclick=n}();try{const e=await async function(){const e=localStorage.getItem("deviceId");if(null===e)return await c();try{return await o(e)}catch(e){if(e instanceof OverconstrainedError)return await c();throw e}}(),t=document.getElementById("camera-video");console.log(e),t.srcObject=e,console.log("Camera access granted.")}catch(e){console.log(e),console.log("Trying again in 10s."),setTimeout((()=>window.location.reload()),1e4)}}));
//# sourceMappingURL=index.c5254c6d.js.map
